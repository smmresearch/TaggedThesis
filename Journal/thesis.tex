%!LW recipe=latexmk (lualatex)
%The above command is for use with VSCode as an editor - can be deleted for others

%%%%%%% Instructions %%%%%%%%%%%%%%%%%%%

%Use lualatex to compile with --interaction-mode=nonstopmode
%The commands I run are of the form (in the folder containing thesis.tex): 

%lualatex --aux-directory=./LatexAux --synctex=1 --interaction=nonstopmode --c-style-errors .\thesis.tex
%biber thesis --output-directory=.\LatexAux  

%biber's output-directory should match lualatex's aux-directory or both should be omitted. c-style-errors is optional.
%You can also use latexmk if desired. Beware, sometimes if you have just added alot or are starting fresh,
%it can take more than 5 runs (latexmk's default max) for everything to settle.


% With lualatex, do not use amssymb, input/output enc
% Get Error ".. \@ doesn't match definition.."? 
% First, make sure you have ran biber and re-ran lualatex
% Then, try deleting *.aux file of file you were messing with. If needed, escalate to deleting all auxillary files.

% Did you know you can have the auxillary files in a different directory with MikTeX?
% Makes deleting all of them a snap

%%Using Tikz? Externally generate as pdf (with just normal presets/without tagging) and use includegraphics to add alt text


%%% While drafting, the class options no-mathml and/or no-tag-tree can speed up compiling.
% no-tag-tree cannot be used for final submission. mathml accessiblity tagging is not currently required by ISU

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\DocumentMetadata{
 lang=en,
 testphase={
  phase-III,
  math,
  table,
  title,
  firstaid
  },
 pdfversion=2.0,
 pdfstandard=ua-2,
 pdfstandard=a-4f,
 uncompress
}

%Can pass additional options to packages loaded by the class
%with \PassOptionsToPackage{<options>}{<packagename>}
\PassOptionsToPackage{noend}{algpseudocode}


% Template file for a standard thesis
\documentclass[11pt,notitlepage,math-packages,algorithms-packages]{isuthesistagged}
%packages always loaded in cls file: xpatch, fancyhdr, titlesec, setspace, nowidow, caption
%           subcaption, geometry, graphicx
%biblatex and hyperref must also be loaded later in the preamble


% notitlepage is used because \begin{abstract} uses titlepage by default, which resets the page numbers

%math-packages loads: amsmath,amsthm, mathtools, thmtools, and associated tagging fixes
%algorithms-packages loads: algorithm, algpseudocode, also provides \parstate for long, wrapped states



%Additional class options:
% no-mathml: disables math tagging (not required by Iowa State)
% no-tag-tree: disables a slow part of tagging (must be re-enabled before submission)




%For complex tables
\usepackage{multirow}
\usepackage{pdflscape}

%%Provides math presets: 
%    Sets up some common math presets like Theorem, Definition, \R for mathbb{R}, etc. 
%    Easier to edit than the class file
\usepackage{templatedShortcuts-private}

%%

%Check package documentation for other font options
%For example, the "default" is a Computer Modern clone
\usepackage[stixtwo]{fontsetup}

%Instead of font setup, unicode-math has more fine-tuned control
%\usepackage{unicode-math}
% \setmainfont{texgyrepagella}[
% Extension       = .otf,
% UprightFont     = *-regular,
% ItalicFont      = *-italic,
% BoldFont        = *-bold,
% BoldItalicFont  = *-bolditalic 
% ]
% \setmathfont{texgyrepagella-math.otf}


%Natbib compatibility mode activated
%Different styles available - look at biblatex documentation
\usepackage[natbib=true,refsection=chapter,style=authoryear]{biblatex}
\addbibresource{thesisAccessTest.bib}
\setlength{\bibitemsep}{13.2pt}

%Set the author
\newcommand{\theAuthor}{Alice Wonder}
%Set the tite 
\twoLineTitle{This is the title of a thesis
submitted to Iowa State University on the first line.}{
Note that only the first letter of
the first word and proper names
are capitalized and this is the second line.}

%%PDF properties automatically set
\author{\theAuthor}
\title{\titleWithLineBreak}
\usepackage[hypertexnames=false,linktocpage=true,pdfauthor={\theAuthor},pdftitle={\titleWithoutBreak},]{hyperref}
\hypersetup{colorlinks=true,linkcolor=blue,citecolor=blue,filecolor=blue,urlcolor=blue,bookmarksnumbered=true,pdfview=FitB,pdfencoding=auto}
\usepackage{bookmark}

\renewcommand{\chapterautorefname}{Chapter}
\renewcommand{\sectionautorefname}{Section}
\renewcommand{\subsectionautorefname}{Subsection}


%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Optional nomenclature package
\usepackage[notintoc,english]{nomencl}


%The command below can be used to get rid of footnote rule(line)
%\renewcommand*\footnoterule{}

%With unicode instead of bm, symbf should be used
%This remaps \bm to prevent problems. There might be slightly different behavior.
\let\bm\symbf

\begin{document}
\include{Preface/titlepage}
\frontmattersetup
% %%
% % Optional thesis dedication
%   Dedication is not usually listed in the table of contents.
%   However, if you do want it, add this command here (not in the dedication file)
%   \addToTOCWithoutChapter{DEDICATION}
\include{Preface/dedication}

\tableofcontentsTagged
\cleardoublepage \phantomsection
\pagebreak

\listoftablesTagged %remove if no tables

\cleardoublepage \phantomsection
\listoffiguresTagged %remove if no figures

%Optional nomenclature
%\cleardoublepage \phantomsection
%\nomenclatureTagged

%Adds Chapter in front of chapter on TOC
\addtocontents{toc}{\def\protect\@chapapp{CHAPTER\ }}

%Optional Acknowledgements
\cleardoublepage \phantomsection
\include{Preface/acknowl}
%Optional thesis abstract
\cleardoublepage \phantomsection
\include{Preface/abstract}
\newpage
\pagenumbering{arabic}
\pagestyle{fancy}
\include{Body/ch1/ch1_main}
\include{Body/ch2/ch2_main}
\include{Body/ch3/ch3_main}
\part{Let us have a part page}
\include{Body/ch4/ch4_main}
\include{Body/ch5/ch5_main}
\include{Body/mathSampler}
\include{Body/ch6/ch6_future_and_conclusions}
\tagtool{flush-floats=subsection}% to keep floats where they are supposed to be in the tagging tree
\clearpage
\pagebreak
\end{document}

% IMPORTANT NOTES
% TABLE OF CONTENTS :
% TOPIC 1:  If you need a page break follow the steps below
% step1
% check before which chapter in the table of contents you want a page break
% step 2
% go the folder "body". There open the chapter tex file that you noted needed page break in the table of contents..
% step 3
% insert  \addtocontents{toc}{\protect\newpage} before the first line i.e. before the line \chapter{RESULTS}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% IN ORDER TO MAKE spacing changes in the title page got to the section in the isuthesis.cls file
% that starts with \long\def\maketitle{\begin{titlepage} and you can use options like
% singlespace (less spacing)
%singlespacing (comparitively more spacing almost like 2 spacing)
% onehalfspacing
%doublespacing (this is more spacing than the singlespacing above )
% more definitions on spacing can be found by going through the class file

% use \caption{} for all captions of figures and tables, where the captions are not too long.

% Use \caption[]{} with the square brackets for short caption of figure or table that goes into the list of tables and list of figures, and the curly brackets can have long captions which go with the figure/ table.
